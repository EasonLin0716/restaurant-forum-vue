(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ab43a"],{1511:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("div",{staticClass:"card mb-3"},[r("UserProfileCard",{attrs:{user:e.user,"initial-is-followed":e.isFollowed,"is-current-user":e.currentUser.id===e.user.id}})],1),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-4"},[r("UserFollowingsCard",{attrs:{user:e.user}}),r("UserFollowersCard",{attrs:{user:e.user}})],1),r("div",{staticClass:"col-md-8"},[r("UserCommentsCard",{attrs:{user:e.user}}),r("UserFavoritedRestaurantsCard",{attrs:{user:e.user}})],1)])])},a=[],n=(r("a4d3"),r("4de4"),r("4160"),r("b0c0"),r("e439"),r("dbb4"),r("b64b"),r("d3b7"),r("159b"),r("2fa7")),i=(r("96cf"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row no-gutters"},[r("div",{staticClass:"col-md-4"},[r("img",{attrs:{src:e._f("emptyImage")(e.user.image),width:"300px",height:"300px"}})]),r("div",{staticClass:"col-md-8"},[r("div",{staticClass:"card-body"},[r("h5",{staticClass:"card-title"},[e._v(e._s(e.user.name))]),r("p",{staticClass:"card-text"},[e._v(e._s(e.user.email))]),r("ul",{staticClass:"list-unstyled list-inline"},[r("li",[r("strong",[e._v(e._s(e.user.commentsLength))]),e._v(" 已評論餐廳 ")]),r("li",[r("strong",[e._v(e._s(e.user.favoritedRestaurantsLength))]),e._v(" 收藏的餐廳 ")]),r("li",[r("strong",[e._v(e._s(e.user.followingsLength))]),e._v(" followings (追蹤者) ")]),r("li",[r("strong",[e._v(e._s(e.user.followersLength))]),e._v(" followers (追隨者) ")])]),r("p"),e.isCurrentUser?[r("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"user-edit",params:{id:e.user.id}}}},[e._v("Edit")])]:[e.isFollowed?r("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.deleteFollowing(e.user.id)}}},[e._v("取消追蹤")]):r("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.addFollowing(e.user.id)}}},[e._v("追蹤")])],r("p")],2)])])}),o=[],l=r("2708"),c=r("4cce"),u=r("2fa3"),d={name:"UserProfileCard",mixins:[l["a"]],data:function(){return{isFollowed:this.initialIsFollowed}},props:{user:{type:Object,required:!0},initialIsFollowed:{type:Boolean,required:!0},isCurrentUser:{type:Boolean,required:!0}},watch:{initialIsFollowed:function(e){this.isFollowed=e}},methods:{addFollowing:function(e){var t,r;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,regeneratorRuntime.awrap(c["a"].addFollowing({userId:e}));case 3:if(t=s.sent,t.data,r=t.statusText,"OK"===r){s.next=8;break}throw new Error(r);case 8:this.isFollowed=!0,s.next=14;break;case 11:s.prev=11,s.t0=s["catch"](0),u["a"].fire({type:"error",title:"無法追蹤，請稍後再試"});case 14:case"end":return s.stop()}}),null,this,[[0,11]])},deleteFollowing:function(e){var t,r;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,regeneratorRuntime.awrap(c["a"].deleteFollowing({userId:e}));case 3:if(t=s.sent,t.data,r=t.statusText,"OK"===r){s.next=8;break}throw new Error(r);case 8:this.isFollowed=!1,s.next=14;break;case 11:s.prev=11,s.t0=s["catch"](0),u["a"].fire({type:"error",title:"無法取消追蹤，請稍後再試"});case 14:case"end":return s.stop()}}),null,this,[[0,11]])}}},m=d,p=r("2877"),g=Object(p["a"])(m,i,o,!1,null,null,null),v=g.exports,f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[e._v(e._s(e.user.followingsLength))]),e._v(" followings (追蹤者) ")]),r("div",{staticClass:"card-body"},e._l(e.user.Followings,(function(t){return r("router-link",{key:t.id,attrs:{to:{params:{id:t.id}}}},[r("img",{staticClass:"mr-1",attrs:{src:e._f("emptyImage")(t.image),width:"60",height:"60"}})])})),1)])},h=[],w={name:"UserFollowingsCard",mixins:[l["a"]],props:{user:{type:Object,required:!0}}},b=w,C=Object(p["a"])(b,f,h,!1,null,null,null),_=C.exports,y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[e._v(e._s(e.user.followersLength))]),e._v(" followers (追隨者) ")]),r("div",{staticClass:"card-body"},e._l(e.user.Followers,(function(t){return r("router-link",{key:t.id,attrs:{to:{params:{id:t.id}}}},[r("img",{staticClass:"avatar",attrs:{src:e._f("emptyImage")(t.image),width:"60",height:"60"}})])})),1)])},F=[],O={name:"UserFollowersCard",mixins:[l["a"]],props:{user:{type:Object,required:!0}}},x=O,U=Object(p["a"])(x,y,F,!1,null,null,null),j=U.exports,k=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[e._v(e._s(e.user.commentsLength))]),e._v(" 已評論餐廳 ")]),r("div",{staticClass:"card-body"},e._l(e.user.Comments,(function(t){return r("router-link",{key:t.id,attrs:{to:{name:"restaurant",params:{id:t.id}}}},[r("img",{staticClass:"avatar",attrs:{src:e._f("emptyImage")(t.Restaurant.image),width:"60",height:"60"}})])})),1)])},R=[],L={name:"UserCommentsCard",mixins:[l["a"]],props:{user:{type:Object,required:!0}}},P=L,E=Object(p["a"])(P,k,R,!1,null,null,null),I=E.exports,q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[e._v(e._s(e.user.favoritedRestaurantsLength))]),e._v(" 收藏的餐廳 ")]),r("div",{staticClass:"card-body"},e._l(e.user.FavoritedRestaurants,(function(e){return r("router-link",{key:e.id,attrs:{to:{name:"restaurant",params:{id:e.id}}}},[r("img",{staticClass:"avatar",attrs:{src:e.image,width:"60",height:"60"}})])})),1)])},$=[],D={name:"UserFavoritedRestaurantsCard",mixins:[l["a"]],props:{user:{type:Object,required:!0}}},K=D,T=Object(p["a"])(K,q,$,!1,null,null,null),B=T.exports,J=r("2f62");function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(r,!0).forEach((function(t){Object(n["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var A={name:"User",components:{UserProfileCard:v,UserFollowingsCard:_,UserFollowersCard:j,UserCommentsCard:I,UserFavoritedRestaurantsCard:B},data:function(){return{user:{id:-1,name:"",email:"",image:"",commentsLength:0,favoritedRestaurantsLength:0,followersLength:0,followingsLength:0,Comments:[],FavoritedRestaurants:[],Followers:[],Followings:[]},isFollowed:!1}},methods:{fetchUser:function(e){var t,r,s,a,n;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,regeneratorRuntime.awrap(c["a"].get({userId:e}));case 3:if(t=i.sent,r=t.data,s=t.statusText,"OK"===s){i.next=8;break}throw new Error(s);case 8:a=r.profile,n=r.isFollowed,this.user=z({},this.user,{id:a.id,name:a.name,email:a.email,image:a.image,commentsLength:a.Comments.length,favoritedRestaurantsLength:a.FavoritedRestaurants.length,followersLength:a.Followers.length,followingsLength:a.Followings.length,Comments:a.Comments,FavoritedRestaurants:a.FavoritedRestaurants,Followers:a.Followers,Followings:a.Followings}),this.isFollowed=n,i.next=16;break;case 13:i.prev=13,i.t0=i["catch"](0),u["a"].fire({type:"error",title:"無法取得餐廳資料，請稍後再試"});case 16:case"end":return i.stop()}}),null,this,[[0,13]])}},computed:z({},Object(J["b"])(["currentUser"])),created:function(){var e=this.$route.params.id;this.fetchUser(e)},beforeRouteUpdate:function(e,t,r){var s=e.params.id;this.fetchUser(s),r()}},G=A,H=Object(p["a"])(G,s,a,!1,null,null,null);t["default"]=H.exports}}]);
//# sourceMappingURL=chunk-2d0ab43a.90addcd2.js.map